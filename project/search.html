<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script src="./js/vue.js"></script>
		<script src="./js/axios.js"></script>
		<style>
			table{
				border: 1px solid lightblue;
				width: 100%;
			}
			
			table td{
				text-align: center;
			}
			
			thead td{
				border: 1px solid red;
				font-weight: 700;
				
			}
			tbody td{
				border: 1px solid green;
			}
		</style>
	</head>
	<body>
		
		<div id="app">
			<button @click="reback">返回</button> 
				 <button @click="search">查询</button>
				  <input type="text" v-model="searchText" placeholder="输入商品名字进行搜索">
			
			<table>
				<thead>
					<tr>
						<td>商品ID</td>
						<td>商品名字</td>
						<td>商品价钱</td>
						<td>商品描述</td>
						<td>商品图片</td>
						
					</tr>
				</thead>
				<tbody>
					
					<tr v-for="(product,index) of searchList" :key="product.pid">
						<td>{{product.pid}}</td>
						<td>{{product.pname}}</td>
						<td>{{product.price}}</td>
						<td>{{product.description}}</td>
						<td>{{product.picture}}</td>
						
								
					</tr>
					
					
				</tbody>
				
				
			</table>			
		</div>
		<script>
			
			//设置axios使用ajax的时候允许携带cookie
			axios.defaults.withCredentials = true;
			
			let v = new Vue({
			                
			                data:{
			                    searchList: [],
			                    searchText: '',
			                },
			                methods:{
			                    
			                    reback(){
			                                location.href='./product.html';           
			                           },
			                           search(){
			                                     axios.get('http://127.0.0.1:8080/project/SearchServlet',{
			                                     	params: {
			                                        	searchText: this.searchText
			                                    	}
			                                     }).then(r=>{
			                                     	this.searchList = r.data.list;
			                                        
			                                     })
			                           		
			                           			           
			                                               },
			                                    
			                },
				
				
						
				
				
			}).$mount('#app')
			
			
		</script>
		
	</body>
</html>